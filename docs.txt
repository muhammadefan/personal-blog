1. gray background (gray-paper-textured-background.jpg)
url: https://www.freepik.com/free-photo/plain-gray-paper-textured-background_15556814.htm#fromView=search&page=1&position=16&uuid=27c740d6-70ef-4987-baa1-125883d4277a&query=gray+textured+Background

2. green background (blue-acrylic-decorative-texture-with.jpg)
url: https://www.freepik.com/free-photo/blue-acrylic-decorative-texture-with-copy-space_5575567.htm#fromView=search&page=1&position=11&uuid=e6dcd14d-3b67-4c14-97f9-f20db987bc76&query=green+textured+Background

3. yellow background (yellow-marble-texture-background.jpg)
url: https://www.freepik.com/free-photo/detailed-structure-marble-natural-pattern-background-design_19076153.htm#fromView=search&page=1&position=35&uuid=ecdf415b-7c9c-418b-9d2b-30be1a3598e2&query=yellow+textured+Background

        // Add environment indicator badge
        window.addEventListener('load', () => {
            const badge = document.createElement('div');
            badge.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${CONFIG.isLocal ? '#2196F3' : '#4CAF50'};
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                font-size: 13px;
                font-weight: bold;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                font-family: 'Segoe UI', sans-serif;
            `;
            
            const mode = CONFIG.isLocal && typeof LOCAL_CONFIG !== 'undefined' 
                ? 'üîß Local Development' 
                : 'üöÄ Production';
            
            badge.textContent = mode;
            document.body.appendChild(badge);
        });


        async function openBlogPost(post) {
            const modal = document.getElementById('blogModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.textContent = post.title;
            modalBody.innerHTML = '<p>Loading...</p>';
            modal.classList.add('active');

            try {
                const response = await fetch(post.file);
                if (!response.ok) {
                    throw new Error('Could not load blog post');
                }
                const content = await response.text();
                modalBody.innerHTML = `<p>${content.replace(/\n/g, '<br>')}</p>`;
            } catch (error) {
                modalBody.innerHTML = `<p style="color: #d32f2f;">Error loading blog post. Make sure the file exists at: ${post.file}</p>
                <p style="margin-top: 20px; color: #666;">To create blog posts, create a folder called "blog-posts" and add .txt files with your content.</p>`;
            }
        }


        // async function openProjectModal(projectId) {
        //     const modal = document.getElementById('projectModal');
        //     const modalHeader = document.getElementById('projectModalHeader');
        //     const modalBody = document.getElementById('projectModalBody');
            
        //     const project = portfolio.find(p => p.id === projectId);
        //     if (!project) return;
            
        //     modalHeader.innerHTML = '';
        //     modalBody.innerHTML = '<p>Loading...</p>';
        //     modal.classList.add('active');
            
        //     try {
        //         const sections = [
        //             { key: 'goalsFile', title: 'Goals' },
        //             { key: 'methodsFile', title: 'Methods' },
        //             { key: 'painPointsFile', title: 'Pain Problem & Lesson Learned' },
        //             { key: 'improvementsFile', title: 'Future Improvement' },
        //             { key: 'impactFile', title: 'Impact' }
        //         ];
                
        //         const contentPromises = sections.map(section => {
        //             const fileName = project[section.key];
        //             if (!fileName) return Promise.resolve({ title: section.title, content: '' });
                    
        //             // ADD 'portfolio/' prefix if not already in the path
        //             const filePath = fileName.startsWith('portfolio/') 
        //                 ? fileName 
        //                 : `portfolio/${fileName}`;
                    
        //             return fetch(filePath)
        //                 .then(response => {
        //                     if (!response.ok) throw new Error(`Could not load ${section.title}`);
        //                     return response.text();
        //                 })
        //                 .then(content => ({ title: section.title, content }))
        //                 .catch(error => ({ 
        //                     title: section.title, 
        //                     content: `Error loading ${section.title}: ${error.message}` 
        //                 }));
        //         });
                
        //         const sectionContents = await Promise.all(contentPromises);
                
        //         const headerHTML = `
        //             <h1 class="project-modal-title">${project.title}</h1>
        //             <p class="project-modal-tech-stacks">${project.techStacks}</p>
        //         `;
                
        //         let bodyHTML = '';
        //         sectionContents.forEach(({ title, content }) => {
        //             if (content.trim()) {
        //                 const parsedContent = marked.parse(content);
        //                 bodyHTML += `
        //                     <div class="project-section">
        //                         <h3 class="project-section-title">${title}</h3>
        //                         <div class="project-section-content">
        //                             ${parsedContent}
        //                         </div>
        //                     </div>
        //                 `;
        //             }
        //         });
                
        //         modalHeader.innerHTML = headerHTML;
        //         modalBody.innerHTML = bodyHTML;
                
        //     } catch (error) {
        //         modalBody.innerHTML = `
        //             <div style="color: #d32f2f; padding: 20px;">
        //                 <p>Error loading project details: ${error.message}</p>
        //             </div>
        //         `;
        //     }
        // }


        function renderBlogCards(containerId, posts) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            posts.forEach(post => {
                const card = document.createElement('div');
                card.className = 'blog-card';
                card.onclick = () => openBlogPost(post);

                card.innerHTML = `
                    <div class="blog-image">
                        <h3 class="blog-title">${post.title}</h3>    
                    </div>
                    <div class="blog-content">
                        <p class="blog-summary">${post.summary}</p>
                        <div class="reading-time">                         
                            <i class="far fa-clock"></i>                  
                            <span>${post.readingTime} ${post.readingTime === 1 ? 'minute' : 'minutes'}</span>
                        </div>                                            
                        <a href="#" class="read-more">read more</a>
                    </div>
                `;

                container.appendChild(card);
            });
        }

async function sendQuestion() {
    const input = document.getElementById('questionInput');
    const question = input.value.trim();
    
    if (!question) {
        alert('Please write a question first');
        return;
    }
    
    const chatHistory = document.getElementById('chatHistory');
    const loading = document.getElementById('loading');
    const sendBtn = document.getElementById('sendBtn');
    
    // Add user question to chat
    addChatMessage('Your question', question, 'question-box');
    
    // Clear input and disable send button
    input.value = '';
    loading.classList.add('active');
    sendBtn.disabled = true;
    
    try {
        let answer;
        let apiKey;
        
        // Get API key based on environment
        if (CONFIG.isLocal && typeof LOCAL_CONFIG !== 'undefined') {
            apiKey = LOCAL_CONFIG.GEMINI_API_KEY;
        } else {
            // For production, you'll need to modify this based on your setup
            // Option 1: Use Netlify function that handles API key
            // Option 2: Use a different approach
            throw new Error('Production RAG not yet configured. Please see documentation.');
        }
        
        // RAG: Search for relevant documents
        let relevantDocs = [];
        let context = '';
        
        if (isEmbeddingsLoaded) {
            console.log('ü§ñ Using RAG (Retrieval-Augmented Generation)');
            relevantDocs = await searchWithEmbeddings(question, apiKey, 3);
            
            // Load content for top results
            const docContents = await Promise.all(
                relevantDocs.map(async (doc) => {
                    const content = await loadDocumentContent(doc.id, doc.type);
                    return content ? {
                        title: doc.title,
                        content: content,
                        type: doc.type,
                        similarity: doc.similarity
                    } : null;
                })
            );
            
            // Filter out nulls and build context
            const validDocs = docContents.filter(doc => doc !== null);
            
            if (validDocs.length > 0) {
                context = validDocs
                    .map(doc => `Document: ${doc.title}\nType: ${doc.type}\nContent: ${doc.content}`)
                    .join('\n\n---\n\n');
                
                console.log(`‚úì Using ${validDocs.length} documents as context`);
            }
        } else {
            console.log('‚ö† RAG not available, using direct response');
        }
        
        // Build prompt with or without context
        let prompt;
        if (context) {
            prompt = `You are a helpful AI assistant for a personal website/blog. Answer the user's question based on the following documents from the website.

IMPORTANT INSTRUCTIONS:
- Answer based ONLY on the information in the provided documents
- If the answer is not in the documents, politely say you don't have that information in the knowledge base
- Be conversational and helpful
- Keep your answer concise but complete
- If you reference information, mention which document it came from

Documents from the website:
${context}

User Question: ${question}

Answer:`;
        } else {
            // Fallback without RAG
            prompt = `You are a helpful AI assistant. Please answer the following question concisely and helpfully:

${question}`;
        }
        
        // Call Gemini API
        const response = await fetch(
            `https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent?key=${apiKey}`,
            {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: prompt }]
                    }]
                })
            }
        );
        
        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error?.message || 'API request failed');
        }
        
        const data = await response.json();
        answer = data.candidates[0].content.parts[0].text;
        
        // Add AI response to chat with sources (if using RAG)
        let messageText = answer;
        if (relevantDocs.length > 0) {
            const sources = relevantDocs.map(doc => 
                `${doc.type === 'blog' ? 'üìÑ' : 'üîí'} ${doc.title}`
            ).join(', ');
            messageText += `\n\n**Sources used:** ${sources}`;
        }
        
        addChatMessage('AI response', messageText, 'response-box');
        
    } catch (error) {
        // Add error message to chat
        addChatMessage('AI response', `‚ùå Error: ${error.message}`, 'response-box');
        console.error('Error:', error);
    } finally {
        loading.classList.remove('active');
        sendBtn.disabled = false;
        chatHistory.scrollTop = chatHistory.scrollHeight;
    }
}

Send question to Gemini API
async function sendQuestion() {
    const input = document.getElementById('questionInput');
    const question = input.value.trim();
    
    if (!question) {
        alert('Please write a question first');
        return;
    }
    
    const chatHistory = document.getElementById('chatHistory');
    const loading = document.getElementById('loading');
    const sendBtn = document.getElementById('sendBtn');
    
    // Add user question to chat
    addChatMessage('Your question', question, 'question-box');
    
    // Clear input and disable send button
    input.value = '';
    loading.classList.add('active');
    sendBtn.disabled = true;
    
    try {
        let answer;
        
        if (CONFIG.isLocal && typeof LOCAL_CONFIG !== 'undefined') {
            // LOCAL DEVELOPMENT: Call Gemini API directly
            console.log('üìç Making direct API call (local mode)');
            
            const response = await fetch(
                `https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent?key=${LOCAL_CONFIG.GEMINI_API_KEY}`,
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: question
                            }]
                        }]
                    })
                }
            );
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error?.message || 'API request failed');
            }
            
            const data = await response.json();
            answer = data.candidates[0].content.parts[0].text;
            
        } else {
            // PRODUCTION: Use Netlify proxy
            console.log('üìç Calling via Netlify proxy (production mode)');
            
            const response = await fetch(CONFIG.netlifyFunctionUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    question: question
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            
            if (!data.success) {
                throw new Error(data.error || 'Unknown error');
            }
            
            answer = data.answer;
        }
        
        // Add AI response to chat
        addChatMessage('AI response', answer, 'response-box');
        
    } catch (error) {
        // Add error message to chat
        addChatMessage('AI response', `‚ùå Error: ${error.message}`, 'response-box');
        console.error('Error:', error);
    } finally {
        loading.classList.remove('active');
        sendBtn.disabled = false;
        chatHistory.scrollTop = chatHistory.scrollHeight;
    }
}


Lorem **Ipsum** is simply *dummy* text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
![Chart showing data trends](assets/yellow-marble-texture-background.jpg)
*Figure 1: Data trends over time*

Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.